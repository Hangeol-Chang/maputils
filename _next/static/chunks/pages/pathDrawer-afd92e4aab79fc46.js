(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return l(1290)}])},1290:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return A}});var a=l(5893),n=l(7054),s=l(7294),r=l(4480);function o(e){let{option:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.dp,{path:t.path,options:t.lineOption}),t.path.map((e,l)=>(0,a.jsx)(n.VM,{center:e,options:t.circleOption},l)),t.arrows.map((e,l)=>(0,a.jsx)(n.dp,{path:e,options:t.arrowOption},l))]})}var i=l(6655),c=l(1791);let p=(0,r.cn)({key:"mapTypeState",default:"google"}),d=(0,r.cn)({key:"hoverEnableState",default:!1}),u={strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},x={strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0},m={strokeOpacity:.9,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!1,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},h=(0,r.cn)({key:"emptyOptionState",default:{label:"empty",path:[],arrows:[],lineOption:u,circleOption:x,arrowOption:m}}),g=(0,r.cn)({key:"iniOptionState",default:{label:"ini",path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],arrows:[[{lat:37.4985836863302,lng:127.02716677408675},{lat:37.498578,lng:127.027175},{lat:37.49858767466946,lng:127.0271775299745}],[{lat:37.49828893769791,lng:127.02724079803167},{lat:37.498282,lng:127.027248},{lat:37.49829114046893,lng:127.02725205608529}]],lineOption:u,circleOption:x,arrowOption:m}}),f=(0,r.cn)({key:"nowOptionState",default:h}),j=(0,r.cn)({key:"focusState",default:{lat:0,lng:0}}),v=(0,r.cn)({key:"idfsState",default:[]}),w=(0,r.cn)({key:"optionsState",default:{}}),y=(0,r.cn)({key:"idfCountState",default:0}),b=(0,r.cn)({key:"nowIdfState",default:0}),k=(0,r.cn)({key:"centerState",default:{lat:37.498578,lng:127.027175}}),N=(0,r.cn)({key:"atomState",default:""});function O(e){let{className:t,drawPath:l,lngfirst:n,setLngfirst:o,focusOption:p,setFocusOption:u}=e,[x,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(40),[f,j]=(0,r.FV)(d),[v,w]=(0,r.FV)(N),[y,b]=(0,s.useState)(!1),k=(0,s.useRef)(),O=function(e){u({...p,radius:parseFloat(e)})},C=function(){l(x),m("")},F=function(){y?g(40):g(140),b(!y)};return(0,a.jsxs)("div",{className:"\n            ".concat(t,"\n        "),children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(i.Z,{className:"my-2 ml-auto",color:"primary_outline",clickEvent:e=>C(),value:"draw path"})}),(0,a.jsx)("textarea",{ref:k,className:"\n                    w-full \n                    outline outline-1 outline-blue-200 \n                    rounded p-2 text-sm\n                ",style:{height:h},value:x,onChange:e=>m(e.target.value),placeholder:"input path"}),(0,a.jsx)(i.Z,{className:"absolute right-5",color:"gray",value:y?"△":"▽",clickEvent:e=>F()}),(0,a.jsx)(c.Z,{type:"text",placeholder:"label",width:"full",value:v,onChange:e=>w(e.target.value)}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:n,onChange:e=>o(e.target.value)}),(0,a.jsx)("label",{for:"lngf",children:"lng first"})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"text-sm m-auto",children:"p_size"}),(0,a.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp:e=>O(e.target.value),className:"w-full cursor-pointer accent-gray-400",max:.5,min:0,step:.1}),(0,a.jsx)(i.Z,{color:f?"primary":"primary_outline",value:f?"enabled":"disabled",clickEvent:()=>j(!f),className:"text-sm"})]})]})}function C(e){let{color:t="red",value:l=0,changeColor:n,aColor:r,max:o,min:i,step:c}=e,[p,d]=(0,s.useState)(l);return(0,s.useEffect)(()=>{d(l)},[l]),(0,a.jsx)("div",{className:"flex align-contents-center",children:(0,a.jsx)("input",{id:"slider",type:"range",value:p,onChange:e=>d(e.target.value),onPointerUp:e=>n(e.target.value,t),className:"w-full my-1 mx-1 cursor-pointer",max:o,min:i,step:c,style:{WebkitAppearance:"none",appearance:"none",backgroundColor:t,accentColor:t,height:4,borderRadius:50}})})}function F(e){let{option:t,setNowOption:l,nowIdf:n}=e,[r,o]=(0,s.useState)(1),[i,c]=(0,s.useState)(t.circleOption),[p,d]=(0,s.useState)({lineOption:t.lineOption,arrowOption:t.arrowOption}),[u,x]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!0),j=function(e,l){let a=t.circleOption.fillColor,n=("0"+parseInt(e).toString(16)).slice(-2),s=-1;s="red"==l?1:"green"==l?3:5;let r=a.substring(0,s)+n+a.substring(s+2);c({...i,fillColor:r,[l]:parseInt(e)})},v=function(e,t){let l=p.lineOption.strokeColor,a=("0"+parseInt(e).toString(16)).substr(-2),n=-1;n="red"==t?1:"green"==t?3:5;let s=l.substring(0,n)+a+l.substring(n+2);d({lineOption:{...p.lineOption,strokeColor:s,[t]:parseInt(e)},arrowOption:{...p.arrowOption,strokeColor:s,[t]:parseInt(e)}}),console.log(p.lineOption.strokeColor)},w=function(e){x(e),d({lineOption:{...p.lineOption,visible:e},arrowOption:p.arrowOption})},y=function(e){h(e),c({...i,visible:e})},b=function(e){f(e),d({lineOption:p.lineOption,arrowOption:{...p.arrowOption,visible:e}})};return(0,s.useEffect)(()=>{l({...t,lineOption:p.lineOption,circleOption:i,arrowOption:p.arrowOption})},[p,i]),(0,s.useEffect)(()=>{d({lineOption:t.lineOption,arrowOption:t.arrowOption}),c(t.circleOption),x(t.lineOption.visible),h(t.circleOption.visible),f(t.arrowOption.visible)},[n]),p.lineOption?(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("hr",{className:"mx-1 my-2"}),(0,a.jsxs)("div",{className:"my-2 flex",children:[(0,a.jsxs)("div",{className:"flex-col justify-between w-1/2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"checkbox",id:"viewMarker",checked:m,onClick:e=>y(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewMarker",children:"Mark"})]}),m?(0,a.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:i.fillColor},children:i.fillColor}):(0,a.jsx)(a.Fragment,{})]}),m?(0,a.jsxs)("div",{className:"flex-col m-auto",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(C,{color:"red",aColor:"accent-red-400",value:i.red,changeColor:j,max:255,min:0,step:1}),(0,a.jsx)(C,{color:"green",aColor:"accent-green-400",value:i.green,changeColor:j,max:255,min:0,step:1}),(0,a.jsx)(C,{color:"blue",aColor:"accent-blue-400",value:i.blue,changeColor:j,max:255,min:0,step:1})]}),(0,a.jsx)(C,{color:"gray",aColor:"accent-gray-200",value:1,changeColor:function(e){c({...i,radius:parseFloat(e)})},max:2,min:0,step:.1})]}):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)("hr",{className:"mx-1 my-2"}),(0,a.jsxs)("div",{className:"my-2 flex",children:[(0,a.jsxs)("div",{className:"flex-col justify-between w-1/2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"viewLine",checked:u,onClick:e=>w(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewLine",children:"Line"})]}),u?(0,a.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:p.lineOption.strokeColor},children:p.lineOption.strokeColor}):(0,a.jsx)(a.Fragment,{})]}),u?(0,a.jsxs)("div",{className:"flex-column m-auto",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(C,{color:"red",aColor:"accent-red-400",value:p.lineOption.red,changeColor:v,max:255,min:0,step:1}),(0,a.jsx)(C,{color:"green",aColor:"accent-green-400",value:p.lineOption.green,changeColor:v,max:255,min:0,step:1}),(0,a.jsx)(C,{color:"blue",aColor:"accent-blue-400",value:p.lineOption.blue,changeColor:v,max:255,min:0,step:1})]}),(0,a.jsx)(C,{color:"gray",aColor:"accent-gray-200",value:1,changeColor:function(e){d({lineOption:{...p.lineOption,strokeWeight:e},arrowOption:{...p.arrowOption}})},max:4,min:0,step:.1})]}):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)("hr",{className:"mx-1 my-2"}),(0,a.jsxs)("div",{className:"my-2 flex",children:[(0,a.jsxs)("div",{className:"flex-col justify-between",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"checkbox",id:"viewArrow",checked:g,onClick:e=>b(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewArrow",children:"Arrow"})]}),g?(0,a.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:p.arrowOption.strokeColor},children:p.arrowOption.strokeColor}):(0,a.jsx)(a.Fragment,{})]}),g?(0,a.jsx)("div",{className:"flex-col m-auto",children:(0,a.jsx)(C,{className:"w-full",color:"gray",aColor:"accent-gray-200",value:1,changeColor(){},max:10,min:0,step:.1})}):(0,a.jsx)(a.Fragment,{})]})]}):(0,a.jsx)(a.Fragment,{})}function M(e){let{path:t,focusCoordi:l,clickCoordi:n}=e,[r,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{o(!0)},[]),r?(0,a.jsx)("table",{className:"w-full",children:(0,a.jsx)("tbody",{children:t.map((e,t)=>{let{lat:s,lng:r}=e;return(0,a.jsxs)("tr",{className:"text-center hover:bg-gray-200",onPointerEnter:()=>l(s,r),onPointerUp:()=>n(s,r),children:[(0,a.jsx)("td",{className:"w-1/5 bg-gray-600 text-white text-sm outline outline-1",children:t}),(0,a.jsx)("td",{className:"w-2/5 px-1 text-sm",children:s}),(0,a.jsx)("td",{className:"w-2/5 text-sm",children:r})]},t)})})}):(0,a.jsx)(a.Fragment,{})}function S(e){let{idf:t,now:l,changeNow:n,option:r}=e,[o,i]=(0,s.useState)("");return(0,s.useEffect)(()=>{t==l?i("\n                bg-white\n                text-black\n                shadow-md\n            "):i("\n            bg-gray-200\n            text-gray-600\n        ")},[l]),(0,a.jsxs)("div",{className:"\n            ".concat(o,"\n            flex justify-between\n            min-w-[15%] h-6 text-center align-middle\n            cursor-pointer\n        "),onClick:()=>n(t),children:[(0,a.jsx)("div",{className:"text-center w-full align-middle px-2",children:r.label}),(0,a.jsxs)("div",{className:"flex-col",children:[(0,a.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:r.circleOption.fillColor}}),(0,a.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:r.lineOption.visible?r.lineOption.strokeColor:"#FFFFFF"}}),(0,a.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:r.arrowOption.visible?r.arrowOption.strokeColor:"#FFFFFF"}})]})]})}function I(e){let{className:t,idfs:l,nowIdf:n,nowOption:s,clickCoordi:o,focusCoordi:c,changeNow:p,setNowOption:d,delLine:u}=e,x=(0,r.sJ)(w);return(0,a.jsxs)("div",{className:"".concat(t),children:[(0,a.jsx)(i.Z,{className:"w-[236px] mb-2 text-sm",color:"primary_outline",value:"delete line",clickEvent:u}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:l.map((e,t)=>(0,a.jsx)(S,{idf:e,option:x[e],now:n,changeNow:p},t))}),(0,a.jsx)(F,{option:s,setNowOption:d,nowIdf:n}),(0,a.jsx)("hr",{className:"mx-1 my-4"}),(0,a.jsx)("div",{className:"max-h-[400px] overflow-auto",children:(0,a.jsx)(M,{path:s.path,focusCoordi:c,clickCoordi:o})})]})}var E=l(436);function _(e){let{idf:t,option:l,navermaps:n}=e,[r,o]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=[];l.path.map(t=>{e.push(new n.LatLng(t.lat,t.lng))}),o(e)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(E.aH,{path:r})})}function T(){let e=(0,E.UL)(),[t,l]=(0,s.useState)(e.MapTypeId.NORMAL),n=function(e){t!=e&&l(e)},o=(0,r.sJ)(k),c=(0,s.useRef)(null),p=(0,r.sJ)(v),d=(0,r.sJ)(b),u=(0,r.sJ)(w),x=(0,r.sJ)(f);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(E.EL,{mapTypeId:t,defaultCenter:new e.LatLng(o.lat,o.lng),children:[p.map((t,l)=>t==d?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(_,{idf:t,navermaps:e,option:u[t]},t)),(0,a.jsx)(_,{idf:d,navermaps:e,option:x})]}),(0,a.jsx)("div",{ref:c,style:{width:"100%",height:"100%"}}),(0,a.jsxs)("div",{className:"flex absolute top-4 left-4",children:[(0,a.jsx)(i.Z,{className:"text-sm",color:t==e.MapTypeId.NORMAL?"primary":"primary_outline",clickEvent:()=>n(e.MapTypeId.NORMAL),value:"일반"}),(0,a.jsx)(i.Z,{className:"text-sm",color:t==e.MapTypeId.TERRAIN?"primary":"primary_outline",clickEvent:()=>n(e.MapTypeId.TERRAIN),value:"지형도"}),(0,a.jsx)(i.Z,{className:"text-sm",color:t==e.MapTypeId.SATELLITE?"primary":"primary_outline",clickEvent:()=>n(e.MapTypeId.SATELLITE),value:"위성"}),(0,a.jsx)(i.Z,{className:"text-sm",color:t==e.MapTypeId.HYBRID?"primary":"primary_outline",clickEvent:()=>n(e.MapTypeId.HYBRID),value:"혼합"})]})]})}function A(){let[e,t]=(0,s.useState)({}),[l,c]=(0,r.FV)(p),u=(0,r.sJ)(g),[x,m]=(0,s.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),C=(0,r.sJ)(d),[F,M]=(0,r.FV)(j),[S,_]=(0,r.FV)(v),[A,L]=(0,r.FV)(w),V=(0,r.sJ)(h),[P,R]=(0,r.FV)(y),[Z,J]=(0,r.FV)(b),[z,W]=(0,r.FV)(N),[U,B]=(0,r.FV)(f),[D,H]=(0,r.FV)(k),[X,K]=(0,s.useState)(15),[Q,Y]=(0,s.useState)(!1),[G,$]=(0,s.useState)(!1),q=function(e){let t=e.length,l=[];for(let a=1;a<t;a++){let n=e[a].lat*Math.PI/180,s=e[a-1].lat*Math.PI/180,r=e[a].lng*Math.PI/180,o=e[a-1].lng*Math.PI/180,i=Math.cos(s)*Math.sin(o-r),c=Math.cos(n)*Math.sin(s)-Math.sin(n)*Math.cos(s)*Math.cos(o-r);console.log(i,c);let p=Math.atan2(c,i),d=35*Math.PI/180,u=p+d,x=p-d,m=e[a].lat,h=e[a].lng,g=[{lat:m+1e-5*Math.sin(u),lng:h+1e-5*Math.cos(u)},{lat:m,lng:h},{lat:m+1e-5*Math.sin(x),lng:h+1e-5*Math.cos(x)}];l.push(g)}return l},ee=function(e){let t=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replaceAll(","," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").replaceAll(" ",","),l=t.split(",").map(Number),a=2*parseInt(l.length),n=[],s=0,r=1;Q&&(s=1,r=0);for(let o=0;o<a;o+=2){let i=l[o+s],c=l[o+r];if(G&&(i=parseInt(i/100)+i%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(i)||1>Math.abs(c))){if(!i||!c)break;n.push({lat:i,lng:c})}}return console.log(n),n},et=function(e){e!=l&&c(e)};return(0,a.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,a.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,a.jsx)(function(){return"google"==l?(0,a.jsx)(n.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,a.jsxs)(n.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:D,zoom:X,children:[S.map((e,t)=>e==Z?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(o,{option:A[e]},t)),(0,a.jsx)(o,{option:U}),(0,a.jsx)(n.VM,{center:F,options:x})]})}):"naver"==l?(0,a.jsx)(E.W2,{style:{width:"100%",height:"100%"},children:(0,a.jsx)(T,{})}):void 0},{})}),(0,a.jsx)(i.Z,{className:"absolute left-2 top-2",color:"google"==l?"primary":"primary_outline",clickEvent:()=>et("google"),value:"google"}),(0,a.jsx)(i.Z,{className:"absolute left-2 top-8",color:"naver"==l?"primary":"primary_outline",clickEvent:()=>et("naver"),value:"naver_"}),(0,a.jsxs)("div",{className:" absolute top-32 left-4 flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px] bg-white p-2 rounded shadow-md",children:[(0,a.jsx)(O,{className:"bg-gray-100 p-2 h-50 rounded",lngfirst:Q,setLngfirst:Y,drawPath:function(e){let t={...V};e&&(t.path=ee(e),t.arrows=q(t.path),t.label=z||P,W(""),L({...A,[Z]:U,[P]:t}),_([...S,P]),J(P),B(t),R(P+1),t.path&&H({lat:t.path[0].lat,lng:t.path[0].lng}))},focusOption:x,setFocusOption:m}),(0,a.jsx)(I,{className:"rounded max-h-full bg-white",idfs:S,nowIdf:Z,nowOption:U,setNowOption:B,delLine:function(){if(S.length>1){Z!=S[0]&&J(S[0]),B(A[S[0]]);let e={...A};delete e[Z],L(e),_(S.filter(e=>e!=Z))}else J(-1),B({...u,path:[],arrows:[]}),_([]),L({})},focusCoordi:function(e,t){C&&(H({lat:e,lng:t}),M({lat:e,lng:t}))},clickCoordi:function(e,t){H({lat:e,lng:t}),M({lat:e,lng:t})},changeNow:function(e){e!=Z&&(L({...A,[Z]:U}),J(e),B(A[e]))}})]})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);