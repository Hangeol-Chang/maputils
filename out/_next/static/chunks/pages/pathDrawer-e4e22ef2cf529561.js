(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return l(8289)}])},8289:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return x}});var a=l(5893),n=l(7054),s=l(7294);function r(e){let{option:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.dp,{path:t.path,options:t.lineOption}),t.path.map((e,l)=>(0,a.jsx)(n.VM,{center:e,options:t.circleOption},l)),t.arrows.map((e,l)=>(0,a.jsx)(n.dp,{path:e,options:t.arrowOption},l))]})}var i=l(6655),o=l(1791);function c(e){let{className:t,drawPath:l,lngfirst:n,setLngfirst:r,focusOption:c,setFocusOption:u,setLabel:d}=e,[p,h]=(0,s.useState)(""),g=function(e){u({...c,radius:parseFloat(e)})};return(0,a.jsxs)("div",{className:"\n            ".concat(t,"\n        "),children:[(0,a.jsx)("textarea",{className:"w-full outline outline-1 rounded outline-blue-200",rows:"4",value:p,onChange:e=>h(e.target.value)}),(0,a.jsx)(o.Z,{type:"text",placeholder:"label",width:"full",onChange:e=>d(e.target.value)}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:n,onChange:e=>r(e.target.value)}),(0,a.jsx)("label",{for:"lngf",children:"lng first"})]}),(0,a.jsx)(i.Z,{color:"primary_outline",clickEvent:e=>l(p),value:"draw path"})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{children:"pointer size"}),(0,a.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp:e=>g(e.target.value),className:"w-full cursor-pointer accent-gray-400",max:.5,min:0,step:.1})]})]})}function u(e){let{color:t="red",value:l=0,changeColor:n,aColor:r}=e,[i,o]=(0,s.useState)(l);return(0,s.useEffect)(()=>{o(l)},[l]),(0,a.jsx)("div",{className:"flex align-contents-center",children:(0,a.jsx)("input",{id:"slider",type:"range",value:i,onChange:e=>o(e.target.value),onPointerUp:e=>n(e.target.value,t),className:"w-full cursor-pointer ".concat(r),max:255,min:0})})}function d(e){let{option:t,delLine:l,setNowOption:n,nowIdf:r}=e,[o,c]=(0,s.useState)(1),[d,p]=(0,s.useState)(t.circleOption),[h,g]=(0,s.useState)(t.lineOption),[x,f]=(0,s.useState)(t.arrowOption),[b,m]=(0,s.useState)(!0),[j,v]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!0),N=function(e,l){let a=t.circleOption.fillColor,n=("0"+parseInt(e).toString(16)).slice(-2),s=-1;s="red"==l?1:"green"==l?3:5;let r=a.substring(0,s)+n+a.substring(s+2);p({...d,fillColor:r,[l]:parseInt(e)})},C=function(e,l){let a=t.lineOption.strokeColor,n=("0"+parseInt(e).toString(16)).substr(-2),s=-1;s="red"==l?1:"green"==l?3:5;let r=a.substring(0,s)+n+a.substring(s+2);g({...h,strokeColor:r,[l]:parseInt(e)}),f({...x,strokeColor:r,[l]:parseInt(e)})},y=function(e){m(e),g({...h,visible:e})},O=function(e){v(e),p({...d,visible:e})},S=function(e){k(e),f({...x,visible:e})};return(0,s.useEffect)(()=>{n({...t,lineOption:h,circleOption:d,arrowOption:x})},[h,d,x]),(0,s.useEffect)(()=>{g(t.lineOption),p(t.circleOption),m(t.lineOption.visible),v(t.circleOption.visible)},[r]),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(e){var t;return t=e.target.value,void p({...d,radius:parseFloat(t)})},className:"w-full cursor-pointer accent-gray-400",max:2,min:0,step:.1}),(0,a.jsx)(i.Z,{color:"primary_outline",value:"del",clickEvent:l})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-1/3",children:"Circle_C"}),(0,a.jsx)(u,{color:"red",aColor:"accent-red-400",value:d.red,changeColor:N}),(0,a.jsx)(u,{color:"green",aColor:"accent-green-400",value:d.green,changeColor:N}),(0,a.jsx)(u,{color:"blue",aColor:"accent-blue-400",value:d.blue,changeColor:N})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-1/3",children:"Line_C"}),(0,a.jsx)(u,{color:"red",aColor:"accent-red-400",value:h.red,changeColor:C}),(0,a.jsx)(u,{color:"green",aColor:"accent-green-400",value:h.green,changeColor:C}),(0,a.jsx)(u,{color:"blue",aColor:"accent-blue-400",value:h.blue,changeColor:C})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"viewLine",checked:b,onClick:e=>y(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewLine",children:"Line"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"viewMarker",checked:j,onClick:e=>O(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewMarker",children:"Marker"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"viewArrow",checked:w,onClick:e=>S(e.target.checked),className:"mr-1"}),(0,a.jsx)("label",{for:"viewArrow",children:"Arrow"})]})]})]})}function p(e){let{path:t,focusCoordi:l}=e,n=function(e,t){l(e,t)},[r,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{i(!0)},[]),r?(0,a.jsx)("table",{className:"w-full",children:(0,a.jsx)("tbody",{children:t.map((e,t)=>{let{lat:l,lng:s}=e;return(0,a.jsxs)("tr",{onPointerEnter:()=>n(l,s),className:"text-center hover:bg-gray-200",children:[(0,a.jsx)("td",{className:"w-1/5 bg-gray-600 text-white outline outline-1",children:t}),(0,a.jsx)("td",{className:"w-2/5 px-1",children:l}),(0,a.jsx)("td",{className:"w-2/5",children:s})]},t)})})}):(0,a.jsx)(a.Fragment,{})}function h(e){let{idf:t,now:l,changeNow:n,label:r}=e,[i,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{t==l?o("\n                bg-white\n                text-black\n                shadow-md\n            "):o("\n            bg-gray-200\n            text-gray-600\n        ")},[l]),(0,a.jsx)("div",{className:"\n            ".concat(i,"\n            min-w-[15%] px-2 h-8 text-center align-middle\n            \n            cursor-pointer\n        "),onClick:()=>n(t),children:r})}function g(e){let{className:t,idfs:l,nowIdf:n,options:s,nowOption:r,focusCoordi:i,changeNow:o,setNowOption:c,delLine:u}=e;return(0,a.jsxs)("div",{className:"\n            ".concat(t,"\n            \n        "),children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:l.map((e,t)=>(0,a.jsx)(h,{idf:e,label:s[e].label,now:n,changeNow:o},t))}),(0,a.jsx)(d,{option:r,setNowOption:c,delLine:u,nowIdf:n}),(0,a.jsx)("hr",{className:"mx-1 my-4"}),(0,a.jsx)("div",{className:"max-h-[700px] overflow-auto",children:(0,a.jsx)(p,{path:r.path,focusCoordi:i})})]})}function x(){let[e,t]=(0,s.useState)({}),l={label:"ini",path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],arrows:[[{lat:37.4985836863302,lng:127.02716677408675},{lat:37.498578,lng:127.027175},{lat:37.49858767466946,lng:127.0271775299745}],[{lat:37.49828893769791,lng:127.02724079803167},{lat:37.498282,lng:127.027248},{lat:37.49829114046893,lng:127.02725205608529}]],lineOption:{strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},circleOption:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0},arrowOption:{strokeOpacity:.9,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255}},[i,o]=(0,s.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),[u,d]=(0,s.useState)({lat:0,lng:0}),[p,h]=(0,s.useState)([0]),[x,f]=(0,s.useState)({0:l}),[b,m]=(0,s.useState)(1),[j,v]=(0,s.useState)(0),[w,k]=(0,s.useState)(""),[N,C]=(0,s.useState)(x[0]),[y,O]=(0,s.useState)({lat:37.498578,lng:127.027175}),[S,M]=(0,s.useState)(15),[I,_]=(0,s.useState)(!1),[E,F]=(0,s.useState)(!1),P=function(e){let t=e.length,l=[];for(let a=1;a<t;a++){let n=e[a].lat*Math.PI/180,s=e[a-1].lat*Math.PI/180,r=e[a].lng*Math.PI/180,i=e[a-1].lng*Math.PI/180,o=Math.cos(s)*Math.sin(i-r),c=Math.cos(n)*Math.sin(s)-Math.sin(n)*Math.cos(s)*Math.cos(i-r);console.log(o,c);let u=Math.atan2(c,o),d=35*Math.PI/180,p=u+d,h=u-d,g=e[a].lat,x=e[a].lng,f=[{lat:g+1e-5*Math.sin(p),lng:x+1e-5*Math.cos(p)},{lat:g,lng:x},{lat:g+1e-5*Math.sin(h),lng:x+1e-5*Math.cos(h)}];l.push(f)}return l},A=function(e){let t=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replace(/^\s+|\s+$/g,"").replaceAll(" ",",");console.log(t);let l=t.split(",").map(Number),a=2*parseInt(l.length),n=[],s=0,r=1;I&&(s=1,r=0);for(let i=0;i<a;i+=2){let o=l[i+s],c=l[i+r];if(E&&(o=parseInt(o/100)+o%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(o)||1>Math.abs(c))){if(!o||!c)break;n.push({lat:o,lng:c})}}return n};return(0,a.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px]",children:[(0,a.jsx)(c,{className:"bg-gray-100 p-2 h-56 rounded shadow-md",lngfirst:I,setLngfirst:_,drawPath:function(e){let t=l;t.path=A(e),t.arrows=P(t.path),t.label=w||b,f({...x,[b]:t}),h([...p,b]),v(b),C(t),m(b+1),t.path&&O({lat:t.path[0].lat,lng:t.path[0].lng})},focusOption:i,setFocusOption:o,setLabel:k}),(0,a.jsx)(g,{className:"rounded max-h-full shadow-md",idfs:p,nowIdf:j,nowOption:N,setNowOption:C,options:x,delLine:function(){p.length>1?(j!=p[0]&&v(p[0]),C(x[p[0]])):(v(-1),C({path:[],arrows:[],hmd:!1,viewArrow:!1,lngfirst:!1,lineOption:{strokeOpacity:.8,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#000",red:0,green:0,blue:0},circleOption:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#000",red:0,green:0,blue:0}})),h(p.filter(e=>e!=j));let e=x;delete e[j],f(e)},changeOption:function(){console.log("change now Option")},focusCoordi:function(e,t){O({lat:e,lng:t}),d({lat:e,lng:t})},changeNow:function(e){e!=j&&(f({...x,[j]:N}),v(e),C(x[e]))}})]}),(0,a.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,a.jsx)(n.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,a.jsxs)(n.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:y,zoom:S,children:[p.map((e,t)=>e==j?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(r,{option:x[e]},t)),(0,a.jsx)(r,{option:N}),(0,a.jsx)(n.VM,{center:u,options:i})]})})})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);