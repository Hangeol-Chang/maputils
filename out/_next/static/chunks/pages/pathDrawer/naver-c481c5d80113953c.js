(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{6023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer/naver",function(){return l(8376)}])},8376:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return m}});var a=l(5893),s=l(7294),n=l(4480),o=l(9052),i=l(9604),r=l(8635),c=l(350),p=l(6655),h=l(436);function u(e){let{idf:t,option:l,navermaps:n}=e,[o,i]=(0,s.useState)([]),[r,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(0==o.length&&0!=l.path.length){let e=[];l.path.map(t=>{e.push(new n.LatLng(t.lat,t.lng))}),i(e)}if(0==r.length&&0!=l.arrows.length){let t=l.arrows,a=[];t.map(e=>{let t=[];e.map(e=>{t.push(new n.LatLng(e.lat,e.lng))}),a.push(t)}),c(a),console.log(a)}console.log(l.circleOption.visible)},[l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.aH,{path:o,strokeColor:l.lineOption.strokeColor,strokeWeight:l.lineOption.strokeWeight,strokeOpacity:l.lineOption.strokeOpacity,visible:l.lineOption.visible}),o.map(e=>{h.Cd,l.circleOption.radius,l.circleOption.fillColor,l.circleOption.fillOpacity,l.circleOption.visible}),r.map(e=>{h.aH,l.arrowOption.strokeColor,l.arrowOption.strokeWeight,l.arrowOption.strokeOpacity,l.arrowOption.visible})]})}function g(e){let{navermaps:t}=e,l=(0,n.sJ)(r.SV),o=(0,n.sJ)(r.v4),[i,c]=(0,s.useState)([]),[p,u]=(0,s.useState)([]),g={strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255};return(0,s.useEffect)(()=>{if(0!=l.length){let e=[];l.map(l=>{e.push(new t.LatLng(l.lat,l.lng))}),c(e)}console.log(l)},[l]),(0,s.useEffect)(()=>{if(0!=o.length){let e=[];o.map(l=>{let a=[];l.map(e=>{a.push(new t.LatLng(e.lat,e.lng))}),e.push(a)}),u(e)}},[o]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.aH,{path:i,strokeColor:g.strokeColor,strokeWeight:g.strokeWeight,strokeOpacity:g.strokeOpacity,visible:g.visible})})}function f(){let e=(0,h.UL)(),[t,l]=(0,s.useState)(e.MapTypeId.NORMAL),[o,i]=(0,s.useState)(null),[c,f]=(0,n.FV)(r.SV),[d,m]=(0,n.FV)(r.v4),M=function(e){t!=e&&l(e)},x=(0,n.sJ)(r.mK),k=(0,s.useRef)(null),v=(0,n.sJ)(r.jM),w=(0,n.sJ)(r.Ep),y=(0,n.sJ)(r.GF),I=(0,n.sJ)(r.di);(0,s.useEffect)(()=>{o&&o.setCenter(x)},[x]);let b=function(e){let t=e.length,l=[];for(let a=1;a<t;a++){let s=e[a].lat*Math.PI/180,n=e[a-1].lat*Math.PI/180,o=e[a].lng*Math.PI/180,i=e[a-1].lng*Math.PI/180,r=Math.cos(n)*Math.sin(i-o),c=Math.cos(s)*Math.sin(n)-Math.sin(s)*Math.cos(n)*Math.cos(i-o);console.log(r,c);let p=Math.atan2(c,r),h=35*Math.PI/180,u=p+h,g=p-h,f=e[a].lat,d=e[a].lng,m=[{lat:f+1e-5*Math.sin(u),lng:d+1e-5*Math.cos(u)},{lat:f,lng:d},{lat:f+1e-5*Math.sin(g),lng:d+1e-5*Math.cos(g)}];l.push(m)}return l};(0,s.useEffect)(()=>{m(b(c))},[c]);let O=function(e){console.log(e.coord._lat,e.coord._lng);let t=[...c];t.push({lat:e.coord._lat,lng:e.coord._lng}),f(t)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.EL,{mapTypeId:t,defaultCenter:new e.LatLng(x.lat,x.lng),ref:i,children:[(0,a.jsx)(h.YZ,{type:"rightclick",listener:e=>O(e)}),v.map((t,l)=>t==w?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(u,{idf:t,navermaps:e,option:y[t]},t)),(0,a.jsx)(g,{navermaps:e,oripath:[],oriArrowPath:[]}),(0,a.jsx)(u,{idf:w,navermaps:e,option:I})]}),(0,a.jsx)("div",{ref:k,style:{width:"100%",height:"100%"}}),(0,a.jsxs)("div",{className:"flex absolute top-4 left-4",children:[(0,a.jsx)(p.Z,{className:"text-sm",color:t==e.MapTypeId.NORMAL?"primary":"primary_outline",clickEvent:()=>M(e.MapTypeId.NORMAL),value:"일반"}),(0,a.jsx)(p.Z,{className:"text-sm",color:t==e.MapTypeId.TERRAIN?"primary":"primary_outline",clickEvent:()=>M(e.MapTypeId.TERRAIN),value:"지형도"}),(0,a.jsx)(p.Z,{className:"text-sm",color:t==e.MapTypeId.SATELLITE?"primary":"primary_outline",clickEvent:()=>M(e.MapTypeId.SATELLITE),value:"위성"}),(0,a.jsx)(p.Z,{className:"text-sm",color:t==e.MapTypeId.HYBRID?"primary":"primary_outline",clickEvent:()=>M(e.MapTypeId.HYBRID),value:"혼합"})]})]})}var d=l(1163);function m(){let[e,t]=(0,s.useState)({}),l=(0,d.useRouter)(),u=(0,n.sJ)(c.P),[g,m]=(0,s.useState)("google"),M=(0,n.sJ)(r.c0),[x,k]=(0,s.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),v=(0,n.sJ)(r.iR),[w,y]=(0,n.FV)(r.Y1),[I,b]=(0,n.FV)(r.jM),[O,j]=(0,n.FV)(r.GF),N=(0,n.sJ)(r.Kg),[E,F]=(0,n.FV)(r.kD),[L,_]=(0,n.FV)(r.Ep),[T,C]=(0,n.FV)(r.Nk),[S,P]=(0,n.FV)(r.di),[A,R]=(0,n.FV)(r.mK),[V,J]=(0,s.useState)(15),[Z,W]=(0,s.useState)(!1),[D,H]=(0,s.useState)(!1),Y=function(e){let t=e.length,l=[];for(let a=1;a<t;a++){let s=e[a].lat*Math.PI/180,n=e[a-1].lat*Math.PI/180,o=e[a].lng*Math.PI/180,i=e[a-1].lng*Math.PI/180,r=Math.cos(n)*Math.sin(i-o),c=Math.cos(s)*Math.sin(n)-Math.sin(s)*Math.cos(n)*Math.cos(i-o);console.log(r,c);let p=Math.atan2(c,r),h=35*Math.PI/180,u=p+h,g=p-h,f=e[a].lat,d=e[a].lng,m=[{lat:f+1e-5*Math.sin(u),lng:d+1e-5*Math.cos(u)},{lat:f,lng:d},{lat:f+1e-5*Math.sin(g),lng:d+1e-5*Math.cos(g)}];l.push(m)}return l},z=function(e){let t=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replaceAll(","," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").replaceAll(" ",","),l=t.split(",").map(Number),a=2*parseInt(l.length),s=[],n=0,o=1;Z&&(n=1,o=0);for(let i=0;i<a;i+=2){let r=l[i+n],c=l[i+o];if(D&&(r=parseInt(r/100)+r%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(r)||1>Math.abs(c))){if(!r||!c)break;s.push({lat:r,lng:c})}}return console.log(s),s};return(0,a.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,a.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,a.jsx)(h.r9,{ncpClientId:"an7y5ntcz5",children:(0,a.jsx)(h.W2,{style:{width:"100%",height:"100%"},children:(0,a.jsx)(f,{})})})}),(0,a.jsx)(p.Z,{className:"absolute left-2 top-2",color:"primary_outline",clickEvent:()=>l.push("".concat(u,"/pathDrawer")),value:"google"}),(0,a.jsx)(p.Z,{className:"absolute left-2 top-8",color:"primary",clickEvent:()=>l.push("".concat(u,"/pathDrawer/naver")),value:"naver"}),(0,a.jsxs)("div",{className:" absolute top-32 left-4 flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px] bg-white p-2 rounded shadow-md",children:[(0,a.jsx)(o.Z,{className:"bg-gray-100 p-2 h-50 rounded",lngfirst:Z,setLngfirst:W,drawPath:function(e){let t={...N};e&&(t.path=z(e),t.arrows=Y(t.path),t.label=T||E,j({...O,[L]:S,[E]:t}),b([...I,E]),_(E),P(t),F(E+1),t.path&&R({lat:t.path[0].lat,lng:t.path[0].lng}))},focusOption:x,setFocusOption:k}),(0,a.jsx)(i.Z,{className:"rounded max-h-full bg-white",idfs:I,nowIdf:L,nowOption:S,setNowOption:P,delLine:function(){if(I.length>1){L!=I[0]&&_(I[0]),P(O[I[0]]);let e={...O};delete e[L],j(e),b(I.filter(e=>e!=L))}else _(-1),P({...M,path:[],arrows:[]}),b([]),j({})},focusCoordi:function(e,t){v&&(R({lat:e,lng:t}),y({lat:e,lng:t}))},clickCoordi:function(e,t){},changeNow:function(e){e!=L&&(j({...O,[L]:S}),_(e),P(O[e]))}})]})]})}}},function(e){e.O(0,[436,810,774,888,179],function(){return e(e.s=6023)}),_N_E=e.O()}]);