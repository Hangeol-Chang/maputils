(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return l(3538)}])},3538:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return m}});var n=l(5893),a=l(7054),i=l(7294),r=l(4480);function s(e){let{option:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.dp,{path:t.path,options:t.lineOption}),t.path.map((e,l)=>(0,n.jsx)(a.VM,{center:e,options:t.circleOption},l)),t.arrows.map((e,l)=>(0,n.jsx)(a.dp,{path:e,options:t.arrowOption},l))]})}var o=l(6655),c=l(1791);let u=(0,r.cn)({key:"hoverEnableState",default:!0});function p(e){let{className:t,drawPath:l,lngfirst:a,setLngfirst:s,focusOption:p,setFocusOption:d,setLabel:h}=e,[g,x]=(0,i.useState)(""),[f,m]=(0,r.FV)(u),b=function(e){d({...p,radius:parseFloat(e)})};return(0,n.jsxs)("div",{className:"\n            ".concat(t,"\n        "),children:[(0,n.jsx)("textarea",{className:"w-full outline outline-1 rounded outline-blue-200",rows:"4",value:g,onChange:e=>x(e.target.value)}),(0,n.jsx)(c.Z,{type:"text",placeholder:"label",width:"full",onChange:e=>h(e.target.value)}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:a,onChange:e=>s(e.target.value)}),(0,n.jsx)("label",{for:"lngf",children:"lng first"})]}),(0,n.jsx)(o.Z,{color:"primary_outline",clickEvent:e=>l(g),value:"draw path"})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"text-sm m-auto",children:"p_size"}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp:e=>b(e.target.value),className:"w-full cursor-pointer accent-gray-400",max:.5,min:0,step:.1}),(0,n.jsx)(o.Z,{color:f?"primary":"primary_outline",value:f?"enabled":"disabled",clickEvent:()=>m(!f),className:""})]})]})}function d(e){let{color:t="red",value:l=0,changeColor:a,aColor:r}=e,[s,o]=(0,i.useState)(l);return(0,i.useEffect)(()=>{o(l)},[l]),(0,n.jsx)("div",{className:"flex align-contents-center",children:(0,n.jsx)("input",{id:"slider",type:"range",value:s,onChange:e=>o(e.target.value),onPointerUp:e=>a(e.target.value,t),className:"w-full cursor-pointer ".concat(r),max:255,min:0})})}function h(e){let{option:t,delLine:l,setNowOption:a,nowIdf:r}=e,[s,c]=(0,i.useState)(1),[u,p]=(0,i.useState)(t.circleOption),[h,g]=(0,i.useState)({lineOption:t.lineOption,arrowOption:t.arrowOption}),[x,f]=(0,i.useState)(!0),[m,b]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!0),v=function(e,l){let n=t.circleOption.fillColor,a=("0"+parseInt(e).toString(16)).slice(-2),i=-1;i="red"==l?1:"green"==l?3:5;let r=n.substring(0,i)+a+n.substring(i+2);p({...u,fillColor:r,[l]:parseInt(e)})},O=function(e,t){let l=h.lineOption.strokeColor,n=("0"+parseInt(e).toString(16)).substr(-2),a=-1;a="red"==t?1:"green"==t?3:5;let i=l.substring(0,a)+n+l.substring(a+2);g({lineOption:{...h.lineOption,strokeColor:i,[t]:parseInt(e)},arrowOption:{...h.arrowOption,strokeColor:i,[t]:parseInt(e)}})},k=function(e){f(e),g({lineOption:{...h.lineOption,visible:e},arrowOption:h.arrowOption})},N=function(e){b(e),p({...u,visible:e})},C=function(e){j(e),g({lineOption:h.lineOption,arrowOption:{...h.arrowOption,visible:e}})};return(0,i.useEffect)(()=>{a({...t,lineOption:h.lineOption,circleOption:u,arrowOption:h.arrowOption})},[h,u]),(0,i.useEffect)(()=>{g({lineOption:t.lineOption,arrowOption:t.arrowOption}),p(t.circleOption),f(t.lineOption.visible),b(t.circleOption.visible),j(t.arrowOption.visible)},[r]),h.lineOption?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(e){var t;return t=e.target.value,void p({...u,radius:parseFloat(t)})},className:"w-full cursor-pointer accent-gray-400",max:2,min:0,step:.1}),(0,n.jsx)(o.Z,{color:"primary_outline",value:"del",clickEvent:l})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"w-1/3",children:"Circle_C"}),(0,n.jsx)(d,{color:"red",aColor:"accent-red-400",value:u.red,changeColor:v}),(0,n.jsx)(d,{color:"green",aColor:"accent-green-400",value:u.green,changeColor:v}),(0,n.jsx)(d,{color:"blue",aColor:"accent-blue-400",value:u.blue,changeColor:v})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"w-1/3",children:"Line_C"}),(0,n.jsx)(d,{color:"red",aColor:"accent-red-400",value:h.lineOption.red,changeColor:O}),(0,n.jsx)(d,{color:"green",aColor:"accent-green-400",value:h.lineOption.green,changeColor:O}),(0,n.jsx)(d,{color:"blue",aColor:"accent-blue-400",value:h.lineOption.blue,changeColor:O})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewLine",checked:x,onClick:e=>k(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewLine",children:"Line"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewMarker",checked:m,onClick:e=>N(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewMarker",children:"Marker"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewArrow",checked:w,onClick:e=>C(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewArrow",children:"Arrow"})]})]})]}):(0,n.jsx)(n.Fragment,{})}function g(e){let{path:t,focusCoordi:l,clickCoordi:a}=e,[r,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{s(!0)},[]),r?(0,n.jsx)("table",{className:"w-full",children:(0,n.jsx)("tbody",{children:t.map((e,t)=>{let{lat:i,lng:r}=e;return(0,n.jsxs)("tr",{className:"text-center hover:bg-gray-200",onPointerEnter:()=>l(i,r),onPointerUp:()=>a(i,r),children:[(0,n.jsx)("td",{className:"w-1/5 bg-gray-600 text-white outline outline-1",children:t}),(0,n.jsx)("td",{className:"w-2/5 px-1",children:i}),(0,n.jsx)("td",{className:"w-2/5",children:r})]},t)})})}):(0,n.jsx)(n.Fragment,{})}function x(e){let{idf:t,now:l,changeNow:a,label:r}=e,[s,o]=(0,i.useState)("");return(0,i.useEffect)(()=>{t==l?o("\n                bg-white\n                text-black\n                shadow-md\n            "):o("\n            bg-gray-200\n            text-gray-600\n        ")},[l]),(0,n.jsx)("div",{className:"\n            ".concat(s,"\n            min-w-[15%] px-2 h-8 text-center align-middle\n            \n            cursor-pointer\n        "),onClick:()=>a(t),children:r})}function f(e){let{className:t,idfs:l,nowIdf:a,options:i,nowOption:r,clickCoordi:s,focusCoordi:o,changeNow:c,setNowOption:u,delLine:p}=e;return(0,n.jsxs)("div",{className:"\n            ".concat(t,"\n            \n        "),children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:l.map((e,t)=>(0,n.jsx)(x,{idf:e,label:i[e].label,now:a,changeNow:c},t))}),(0,n.jsx)(h,{option:r,setNowOption:u,delLine:p,nowIdf:a}),(0,n.jsx)("hr",{className:"mx-1 my-4"}),(0,n.jsx)("div",{className:"max-h-[700px] overflow-auto",children:(0,n.jsx)(g,{path:r.path,focusCoordi:o,clickCoordi:s})})]})}function m(){let[e,t]=(0,i.useState)({}),l={label:"ini",path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],arrows:[[{lat:37.4985836863302,lng:127.02716677408675},{lat:37.498578,lng:127.027175},{lat:37.49858767466946,lng:127.0271775299745}],[{lat:37.49828893769791,lng:127.02724079803167},{lat:37.498282,lng:127.027248},{lat:37.49829114046893,lng:127.02725205608529}]],lineOption:{strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},circleOption:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0},arrowOption:{strokeOpacity:.9,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255}},[o,c]=(0,i.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),d=(0,r.sJ)(u),[h,g]=(0,i.useState)({lat:0,lng:0}),[x,m]=(0,i.useState)([0]),[b,w]=(0,i.useState)({0:l}),[j,v]=(0,i.useState)(1),[O,k]=(0,i.useState)(0),[N,C]=(0,i.useState)(""),[y,S]=(0,i.useState)(b[0]),[M,I]=(0,i.useState)({lat:37.498578,lng:127.027175}),[_,E]=(0,i.useState)(15),[F,P]=(0,i.useState)(!1),[A,L]=(0,i.useState)(!1),z=function(e){let t=e.length,l=[];for(let n=1;n<t;n++){let a=e[n].lat*Math.PI/180,i=e[n-1].lat*Math.PI/180,r=e[n].lng*Math.PI/180,s=e[n-1].lng*Math.PI/180,o=Math.cos(i)*Math.sin(s-r),c=Math.cos(a)*Math.sin(i)-Math.sin(a)*Math.cos(i)*Math.cos(s-r);console.log(o,c);let u=Math.atan2(c,o),p=35*Math.PI/180,d=u+p,h=u-p,g=e[n].lat,x=e[n].lng,f=[{lat:g+1e-5*Math.sin(d),lng:x+1e-5*Math.cos(d)},{lat:g,lng:x},{lat:g+1e-5*Math.sin(h),lng:x+1e-5*Math.cos(h)}];l.push(f)}return l},V=function(e){let t=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replaceAll(","," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").replaceAll(" ",",");console.log(t);let l=t.split(",").map(Number),n=2*parseInt(l.length),a=[],i=0,r=1;F&&(i=1,r=0);for(let s=0;s<n;s+=2){let o=l[s+i],c=l[s+r];if(A&&(o=parseInt(o/100)+o%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(o)||1>Math.abs(c))){if(!o||!c)break;a.push({lat:o,lng:c})}}return a};return(0,n.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px]",children:[(0,n.jsx)(p,{className:"bg-gray-100 p-2 h-50 rounded shadow-md",lngfirst:F,setLngfirst:P,drawPath:function(e){let t=l;t.path=V(e),t.arrows=z(t.path),t.label=N||j,w({...b,[j]:t}),m([...x,j]),k(j),S(t),v(j+1),t.path&&I({lat:t.path[0].lat,lng:t.path[0].lng})},focusOption:o,setFocusOption:c,setLabel:C}),(0,n.jsx)(f,{className:"rounded max-h-full shadow-md",idfs:x,nowIdf:O,nowOption:y,setNowOption:S,options:b,delLine:function(){if(x.length>1){O!=x[0]&&k(x[0]),S(b[x[0]]);let e=b;delete e[O],w(e),m(x.filter(e=>e!=O))}else k(-1),S({...l,path:[],arrows:[]}),m([]),w({})},changeOption:function(){console.log("change now Option")},focusCoordi:function(e,t){d&&(I({lat:e,lng:t}),g({lat:e,lng:t}))},clickCoordi:function(e,t){I({lat:e,lng:t}),g({lat:e,lng:t})},changeNow:function(e){e!=O&&(w({...b,[O]:y}),k(e),S(b[e]))}})]}),(0,n.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,n.jsx)(a.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,n.jsxs)(a.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:M,zoom:_,children:[x.map((e,t)=>e==O?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(s,{option:b[e]},t)),(0,n.jsx)(s,{option:y}),(0,n.jsx)(a.VM,{center:h,options:o})]})})})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);