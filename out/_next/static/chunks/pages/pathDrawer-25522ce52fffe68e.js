(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return l(8289)}])},8289:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return x}});var n=l(5893),a=l(7054),r=l(7294);function s(e){let{option:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.dp,{path:t.path,options:t.lineOption}),t.path.map((e,l)=>(0,n.jsx)(a.VM,{center:e,options:t.circleOption},l))]})}var i=l(6655);function c(e){let{className:t,drawPath:l,lngfirst:a,setLngfirst:s}=e,[c,o]=(0,r.useState)("");return(0,n.jsxs)("div",{className:"\n            ".concat(t,"\n        "),children:[(0,n.jsx)("textarea",{className:"w-full outline outline-1 rounded outline-blue-200",rows:"4",value:c,onChange:e=>o(e.target.value)}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"hhmmddd",className:"mr-1"}),(0,n.jsx)("label",{for:"hhmmddd",children:"hmd"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:a,onChange:e=>s(e.target.value)}),(0,n.jsx)("label",{for:"lngf",children:"lng first"})]}),(0,n.jsx)(i.Z,{color:"primary_outline",clickEvent:e=>l(c),value:"draw path"})]})]})}function o(e){let{color:t="red",value:l=0,changeColor:a,aColor:s}=e,[i,c]=(0,r.useState)(l);return(0,r.useEffect)(()=>{c(l)},[l]),(0,n.jsx)("div",{className:"flex align-contents-center",children:(0,n.jsx)("input",{id:"slider",type:"range",value:i,onChange:e=>c(e.target.value),onPointerUp:e=>a(e.target.value,t),className:"w-full cursor-pointer ".concat(s),max:255,min:0})})}function d(e){let{option:t,delLine:l,setNowOption:a,nowIdf:s}=e,[c,d]=(0,r.useState)(1),[u,h]=(0,r.useState)(t.circleOption),[p,x]=(0,r.useState)(t.lineOption),[g,f]=(0,r.useState)(!0),[m,b]=(0,r.useState)(!0),j=function(e,l){let n=t.circleOption.fillColor,a=("0"+parseInt(e).toString(16)).slice(-2),r=-1;r="red"==l?1:"green"==l?3:5;let s=n.substring(0,r)+a+n.substring(r+2);h({...u,fillColor:s,[l]:parseInt(e)})},v=function(e,l){let n=t.lineOption.strokeColor,a=("0"+parseInt(e).toString(16)).substr(-2),r=-1;r="red"==l?1:"green"==l?3:5;let s=n.substring(0,r)+a+n.substring(r+2);x({...p,strokeColor:s,[l]:parseInt(e)})},w=function(e){f(e),x({...p,visible:e})},N=function(e){b(e),h({...u,visible:e})};return(0,r.useEffect)(()=>{a({...t,lineOption:p,circleOption:u})},[p,u]),(0,r.useEffect)(()=>{x(t.lineOption),h(t.circleOption),f(t.lineOption.visible),b(t.circleOption.visible)},[s]),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(e){var t;return t=e.target.value,void h({...u,radius:parseFloat(t)})},className:"w-full cursor-pointer accent-gray-400",max:2,min:0,step:.1}),(0,n.jsx)(i.Z,{color:"primary_outline",value:"del",clickEvent:l})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"w-1/3",children:"Circle_C"}),(0,n.jsx)(o,{color:"red",aColor:"accent-red-400",value:u.red,changeColor:j}),(0,n.jsx)(o,{color:"green",aColor:"accent-green-400",value:u.green,changeColor:j}),(0,n.jsx)(o,{color:"blue",aColor:"accent-blue-400",value:u.blue,changeColor:j})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"w-1/3",children:"Line_C"}),(0,n.jsx)(o,{color:"red",aColor:"accent-red-400",value:p.red,changeColor:v}),(0,n.jsx)(o,{color:"green",aColor:"accent-green-400",value:p.green,changeColor:v}),(0,n.jsx)(o,{color:"blue",aColor:"accent-blue-400",changeColor:v})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewLine",checked:g,onClick:e=>w(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewLine",children:"Line"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewMarker",checked:m,onClick:e=>N(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewMarker",children:"Marker"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewArrow",className:"mr-1"}),(0,n.jsx)("label",{for:"viewArrow",children:"Arrow"})]})]})]})}function u(e){let{path:t,focusCoordi:l}=e,a=function(e,t){l(e,t)},[s,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0)},[]),s?(0,n.jsx)("table",{className:"w-full",children:(0,n.jsx)("tbody",{children:t.map((e,t)=>{let{lat:l,lng:r}=e;return(0,n.jsxs)("tr",{onPointerEnter:()=>a(l,r),className:"text-center hover:bg-gray-200",children:[(0,n.jsx)("td",{className:"w-1/5 bg-gray-600 text-white outline outline-1",children:t}),(0,n.jsx)("td",{className:"w-2/5 px-1",children:l}),(0,n.jsx)("td",{className:"w-2/5",children:r})]},t)})})}):(0,n.jsx)(n.Fragment,{})}function h(e){let{idf:t,now:l,changeNow:a}=e,[s,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{t==l?i("\n                bg-white\n                text-black\n                shadow-md\n            "):i("\n            bg-gray-200\n            text-gray-600\n        ")},[l]),(0,n.jsx)("div",{className:"\n            ".concat(s,"\n            w-1/5 h-8 text-center align-middle\n            \n            cursor-pointer\n        "),onClick:()=>a(t),children:t})}function p(e){let{className:t,idfs:l,nowIdf:a,nowOption:r,focusCoordi:s,changeNow:i,setNowOption:c,delLine:o}=e;return(0,n.jsxs)("div",{className:"\n            ".concat(t,"\n            \n        "),children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:l.map((e,t)=>(0,n.jsx)(h,{idf:e,now:a,changeNow:i},t))}),(0,n.jsx)(d,{option:r,setNowOption:c,delLine:o,nowIdf:a}),(0,n.jsx)("hr",{className:"mx-1 my-4"}),(0,n.jsx)("div",{className:"max-h-[700px] overflow-auto",children:(0,n.jsx)(u,{path:r.path,focusCoordi:s})})]})}function x(){let[e,t]=(0,r.useState)({}),l={path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],viewArrow:!0,lineOption:{strokeOpacity:.8,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},circleOption:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0}},[i,o]=(0,r.useState)({lat:0,lng:0}),[d,u]=(0,r.useState)([0]),[h,x]=(0,r.useState)(1),[g,f]=(0,r.useState)({0:l}),[m,b]=(0,r.useState)(0),[j,v]=(0,r.useState)(g[0]),[w,N]=(0,r.useState)({lat:37.498578,lng:127.027175}),[k,C]=(0,r.useState)(15),[y,O]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),I=function(e){let t=e.length;for(let l=1;l<t;l++){let n=e[l].lat*Math.PI/180,a=e[l-1].lat*Math.PI/180,r=e[l].lng*Math.PI/180,s=e[l-1].lng*Math.PI/180;console.log(Math.cos(a)*Math.sin(s-r),Math.cos(n)*Math.sin(a)-Math.sin(n)*Math.cos(a)*Math.cos(s-r))}return{}},_=function(e){let t=e.replaceAll("[","").replaceAll("]","").replaceAll(" ","").replaceAll("	",",").replaceAll("\n",","),l=t.split(",").map(Number),n=2*parseInt(l.length),a=[],r=0,s=1;y&&(r=1,s=0);for(let i=0;i<n;i+=2){let c=l[i+r],o=l[i+s];if(console.log(c+" "+o),S&&(c=parseInt(c/100)+c%100/60,o=parseInt(o/100)+o%100/60),!(1>Math.abs(c)||1>Math.abs(o))){if(!c||!o)break;a.push({lat:c,lng:o})}}return a};return(0,n.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px]",children:[(0,n.jsx)(c,{className:"bg-gray-100 p-2 h-44 rounded shadow-md",lngfirst:y,setLngfirst:O,drawPath:function(e){let t=l;t.path=_(e),I(t.path),f({...g,[h]:t}),u([...d,h]),b(h),v(t),x(h+1),t.path&&N({lat:t.path[0].lat,lng:t.path[0].lng})}}),(0,n.jsx)(p,{className:"rounded max-h-full shadow-md",idfs:d,nowIdf:m,nowOption:j,setNowOption:v,delLine:function(){d.length>1?(m!=d[0]&&b(d[0]),v(g[d[0]])):(b(-1),v({path:[],hmd:!1,viewArrow:!1,lngfirst:!1,lineOption:{strokeOpacity:.8,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#000",red:0,green:0,blue:0},circleOption:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:1,zIndex:1,fillColor:"#000",red:0,green:0,blue:0}})),u(d.filter(e=>e!=m));let e=g;delete e[m],f(e)},changeOption:function(){console.log("change now Option")},focusCoordi:function(e,t){N({lat:e,lng:t}),o({lat:e,lng:t})},changeNow:function(e){e!=m&&(f({...g,[m]:j}),b(e),v(g[e]))}})]}),(0,n.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,n.jsx)(a.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,n.jsxs)(a.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:w,zoom:k,children:[d.map((e,t)=>e==m?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(s,{option:g[e]},t)),(0,n.jsx)(s,{option:j}),(0,n.jsx)(a.VM,{center:i,options:{strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}})]})})})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);