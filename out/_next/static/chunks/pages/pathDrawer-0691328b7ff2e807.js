(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return t(3538)}])},3538:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return F}});var n=t(5893),a=t(7054),s=t(7294),i=t(4480);function r(e){let{option:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.dp,{path:l.path,options:l.lineOption}),l.path.map((e,t)=>(0,n.jsx)(a.VM,{center:e,options:l.circleOption},t)),l.arrows.map((e,t)=>(0,n.jsx)(a.dp,{path:e,options:l.arrowOption},t))]})}var o=t(6655),c=t(1791);let d=(0,i.cn)({key:"hoverEnableState",default:!1}),u={strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},p={strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0},x={strokeOpacity:.9,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!1,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},h=(0,i.cn)({key:"emptyOptionState",default:{label:"empty",path:[],arrows:[],lineOption:u,circleOption:p,arrowOption:x}}),f=(0,i.cn)({key:"iniOptionState",default:{label:"ini",path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],arrows:[[{lat:37.4985836863302,lng:127.02716677408675},{lat:37.498578,lng:127.027175},{lat:37.49858767466946,lng:127.0271775299745}],[{lat:37.49828893769791,lng:127.02724079803167},{lat:37.498282,lng:127.027248},{lat:37.49829114046893,lng:127.02725205608529}]],lineOption:u,circleOption:p,arrowOption:x}}),g=(0,i.cn)({key:"nowOptionState",default:h}),m=(0,i.cn)({key:"focusState",default:{lat:0,lng:0}}),j=(0,i.cn)({key:"idfsState",default:[]}),b=(0,i.cn)({key:"optionsState",default:{}}),w=(0,i.cn)({key:"idfCountState",default:0}),v=(0,i.cn)({key:"nowIdfState",default:0}),O=(0,i.cn)({key:"centerState",default:{lat:37.498578,lng:127.027175}});function y(e){let{className:l,drawPath:t,lngfirst:a,setLngfirst:r,focusOption:u,setFocusOption:p,setLabel:x}=e,[h,f]=(0,s.useState)(""),[g,m]=(0,i.FV)(d),j=function(e){p({...u,radius:parseFloat(e)})};return(0,n.jsxs)("div",{className:"\n            ".concat(l,"\n        "),children:[(0,n.jsx)("textarea",{className:"w-full outline outline-1 rounded outline-blue-200",rows:"4",value:h,onChange:e=>f(e.target.value)}),(0,n.jsx)(c.Z,{type:"text",placeholder:"label",width:"full",onChange:e=>x(e.target.value)}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:a,onChange:e=>r(e.target.value)}),(0,n.jsx)("label",{for:"lngf",children:"lng first"})]}),(0,n.jsx)(o.Z,{color:"primary_outline",clickEvent:e=>t(h),value:"draw path"})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"text-sm m-auto",children:"p_size"}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp:e=>j(e.target.value),className:"w-full cursor-pointer accent-gray-400",max:.5,min:0,step:.1}),(0,n.jsx)(o.Z,{color:g?"primary":"primary_outline",value:g?"enabled":"disabled",clickEvent:()=>m(!g),className:""})]})]})}function N(e){let{color:l="red",value:t=0,changeColor:a,aColor:i}=e,[r,o]=(0,s.useState)(t);return(0,s.useEffect)(()=>{o(t)},[t]),(0,n.jsx)("div",{className:"flex align-contents-center",children:(0,n.jsx)("input",{id:"slider",type:"range",value:r,onChange:e=>o(e.target.value),onPointerUp:e=>a(e.target.value,l),className:"w-full cursor-pointer ".concat(i),max:255,min:0})})}function k(e){let{option:l,delLine:t,setNowOption:a,nowIdf:i}=e,[r,c]=(0,s.useState)(1),[d,u]=(0,s.useState)(l.circleOption),[p,x]=(0,s.useState)({lineOption:l.lineOption,arrowOption:l.arrowOption}),[h,f]=(0,s.useState)(!0),[g,m]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!0),w=function(e,t){let n=l.circleOption.fillColor,a=("0"+parseInt(e).toString(16)).slice(-2),s=-1;s="red"==t?1:"green"==t?3:5;let i=n.substring(0,s)+a+n.substring(s+2);u({...d,fillColor:i,[t]:parseInt(e)})},v=function(e,l){let t=p.lineOption.strokeColor,n=("0"+parseInt(e).toString(16)).substr(-2),a=-1;a="red"==l?1:"green"==l?3:5;let s=t.substring(0,a)+n+t.substring(a+2);x({lineOption:{...p.lineOption,strokeColor:s,[l]:parseInt(e)},arrowOption:{...p.arrowOption,strokeColor:s,[l]:parseInt(e)}}),console.log(p.lineOption.strokeColor)},O=function(e){f(e),x({lineOption:{...p.lineOption,visible:e},arrowOption:p.arrowOption})},y=function(e){m(e),u({...d,visible:e})},k=function(e){b(e),x({lineOption:p.lineOption,arrowOption:{...p.arrowOption,visible:e}})};return(0,s.useEffect)(()=>{a({...l,lineOption:p.lineOption,circleOption:d,arrowOption:p.arrowOption})},[p,d]),(0,s.useEffect)(()=>{x({lineOption:l.lineOption,arrowOption:l.arrowOption}),u(l.circleOption),f(l.lineOption.visible),m(l.circleOption.visible),b(l.arrowOption.visible)},[i]),p.lineOption?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(o.Z,{color:"primary_outline",value:"del",clickEvent:t})}),(0,n.jsxs)("div",{className:"my-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"checkbox",id:"viewMarker",checked:g,onClick:e=>y(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewMarker",children:"Mark"})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"bg-blue-100 w-10 my-2 mx-1",style:{backgroundColor:d.fillColor}}),(0,n.jsxs)("div",{className:"text-xs my-auto",children:[" ",d.fillColor," "]})]})]}),(0,n.jsxs)("div",{className:"flex-column",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{color:"red",aColor:"accent-red-400",value:d.red,changeColor:w}),(0,n.jsx)(N,{color:"green",aColor:"accent-green-400",value:d.green,changeColor:w}),(0,n.jsx)(N,{color:"blue",aColor:"accent-blue-400",value:d.blue,changeColor:w})]}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(e){var l;return l=e.target.value,void u({...d,radius:parseFloat(l)})},className:"w-full cursor-pointer accent-gray-600",max:2,min:0,step:.1})]})]}),(0,n.jsxs)("div",{className:"my-2 ",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewLine",checked:h,onClick:e=>O(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewLine",children:"Line"})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"bg-blue-100 w-10 my-2 mx-1",style:{backgroundColor:p.lineOption.strokeColor}}),(0,n.jsxs)("div",{className:"text-xs my-auto",children:[" ",p.lineOption.strokeColor," "]})]})]}),(0,n.jsxs)("div",{className:"flex-column",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{color:"red",aColor:"accent-red-400",value:p.lineOption.red,changeColor:v}),(0,n.jsx)(N,{color:"green",aColor:"accent-green-400",value:p.lineOption.green,changeColor:v}),(0,n.jsx)(N,{color:"blue",aColor:"accent-blue-400",value:p.lineOption.blue,changeColor:v})]}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(){},className:"w-full cursor-pointer accent-gray-600",max:2,min:0,step:.1})]})]}),(0,n.jsxs)("div",{className:"my-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"checkbox",id:"viewArrow",checked:j,onClick:e=>k(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewArrow",children:"Arrow"})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"bg-blue-100 w-10 my-2 mx-1",style:{backgroundColor:p.arrowOption.strokeColor}}),(0,n.jsxs)("div",{className:"text-xs my-auto",children:[" ",p.arrowOption.strokeColor," "]})]})]}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp(){},className:"w-full cursor-pointer accent-gray-600",max:2,min:0,step:.1})]})]}):(0,n.jsx)(n.Fragment,{})}function C(e){let{path:l,focusCoordi:t,clickCoordi:a}=e,[i,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{r(!0)},[]),i?(0,n.jsx)("table",{className:"w-full",children:(0,n.jsx)("tbody",{children:l.map((e,l)=>{let{lat:s,lng:i}=e;return(0,n.jsxs)("tr",{className:"text-center hover:bg-gray-200",onPointerEnter:()=>t(s,i),onPointerUp:()=>a(s,i),children:[(0,n.jsx)("td",{className:"w-1/5 bg-gray-600 text-white outline outline-1",children:l}),(0,n.jsx)("td",{className:"w-2/5 px-1",children:s}),(0,n.jsx)("td",{className:"w-2/5",children:i})]},l)})})}):(0,n.jsx)(n.Fragment,{})}function S(e){let{idf:l,now:t,changeNow:a,label:i}=e,[r,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{l==t?o("\n                bg-white\n                text-black\n                shadow-md\n            "):o("\n            bg-gray-200\n            text-gray-600\n        ")},[t]),(0,n.jsx)("div",{className:"\n            ".concat(r,"\n            min-w-[15%] px-2 h-8 text-center align-middle\n            \n            cursor-pointer\n        "),onClick:()=>a(l),children:i})}function M(e){let{className:l,idfs:t,nowIdf:a,options:s,nowOption:i,clickCoordi:r,focusCoordi:o,changeNow:c,setNowOption:d,delLine:u}=e;return(0,n.jsxs)("div",{className:"\n            ".concat(l,"\n            \n        "),children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:t.map((e,l)=>(0,n.jsx)(S,{idf:e,label:s[e].label,now:a,changeNow:c},l))}),(0,n.jsx)(k,{option:i,setNowOption:d,delLine:u,nowIdf:a}),(0,n.jsx)("hr",{className:"mx-1 my-4"}),(0,n.jsx)("div",{className:"max-h-[400px] overflow-auto",children:(0,n.jsx)(C,{path:i.path,focusCoordi:o,clickCoordi:r})})]})}function F(){let[e,l]=(0,s.useState)({}),t=(0,i.sJ)(f),[o,c]=(0,s.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),u=(0,i.sJ)(d),[p,x]=(0,i.FV)(m),[N,k]=(0,i.FV)(j),[C,S]=(0,i.FV)(b),F=(0,i.sJ)(h),[I,E]=(0,i.FV)(w),[V,_]=(0,i.FV)(v),[P,A]=(0,s.useState)(""),[z,L]=(0,i.FV)(g),[U,Z]=(0,i.FV)(O),[J,T]=(0,s.useState)(15),[X,K]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(!1),B=function(e){let l=e.length,t=[];for(let n=1;n<l;n++){let a=e[n].lat*Math.PI/180,s=e[n-1].lat*Math.PI/180,i=e[n].lng*Math.PI/180,r=e[n-1].lng*Math.PI/180,o=Math.cos(s)*Math.sin(r-i),c=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(r-i);console.log(o,c);let d=Math.atan2(c,o),u=35*Math.PI/180,p=d+u,x=d-u,h=e[n].lat,f=e[n].lng,g=[{lat:h+1e-5*Math.sin(p),lng:f+1e-5*Math.cos(p)},{lat:h,lng:f},{lat:h+1e-5*Math.sin(x),lng:f+1e-5*Math.cos(x)}];t.push(g)}return t},D=function(e){let l=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replaceAll(","," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").replaceAll(" ",","),t=l.split(",").map(Number),n=2*parseInt(t.length),a=[],s=0,i=1;X&&(s=1,i=0);for(let r=0;r<n;r+=2){let o=t[r+s],c=t[r+i];if(Q&&(o=parseInt(o/100)+o%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(o)||1>Math.abs(c))){if(!o||!c)break;a.push({lat:o,lng:c})}}return console.log(a),a};return(0,n.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,n.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,n.jsx)(a.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,n.jsxs)(a.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:U,zoom:J,children:[N.map((e,l)=>e==V?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(r,{option:C[e]},l)),(0,n.jsx)(r,{option:z}),(0,n.jsx)(a.VM,{center:p,options:o})]})})}),(0,n.jsxs)("div",{className:" absolute top-32 left-4 flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px] bg-white p-2 rounded shadow-md",children:[(0,n.jsx)(y,{className:"bg-gray-100 p-2 h-50 rounded",lngfirst:X,setLngfirst:K,drawPath:function(e){let l={...F};l.path=D(e),l.arrows=B(l.path),l.label=P||I,S({...C,[V]:z,[I]:l}),k([...N,I]),_(I),L(l),E(I+1),l.path&&Z({lat:l.path[0].lat,lng:l.path[0].lng})},focusOption:o,setFocusOption:c,setLabel:A}),(0,n.jsx)(M,{className:"rounded max-h-full bg-white",idfs:N,nowIdf:V,nowOption:z,setNowOption:L,options:C,delLine:function(){if(N.length>1){V!=N[0]&&_(N[0]),L(C[N[0]]);let e={...C};delete e[V],S(e),k(N.filter(e=>e!=V))}else _(-1),L({...t,path:[],arrows:[]}),k([]),S({})},focusCoordi:function(e,l){u&&(Z({lat:e,lng:l}),x({lat:e,lng:l}))},clickCoordi:function(e,l){Z({lat:e,lng:l}),x({lat:e,lng:l})},changeNow:function(e){e!=V&&(S({...C,[V]:z}),_(e),L(C[e]))}})]})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);