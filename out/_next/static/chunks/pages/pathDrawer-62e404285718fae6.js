(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7023:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathDrawer",function(){return l(3538)}])},3538:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return I}});var n=l(5893),a=l(7054),s=l(7294),o=l(4480);function i(e){let{option:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.dp,{path:t.path,options:t.lineOption}),t.path.map((e,l)=>(0,n.jsx)(a.VM,{center:e,options:t.circleOption},l)),t.arrows.map((e,l)=>(0,n.jsx)(a.dp,{path:e,options:t.arrowOption},l))]})}var r=l(6655),c=l(1791);let d=(0,o.cn)({key:"hoverEnableState",default:!1}),u={strokeOpacity:.8,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},p={strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!1,radius:1,zIndex:1,fillColor:"#FF0000",red:255,green:0,blue:0},x={strokeOpacity:.9,strokeWeight:1.5,clickable:!1,draggable:!1,editable:!1,visible:!1,zIndex:1,strokeColor:"#0000FF",red:0,green:0,blue:255},h=(0,o.cn)({key:"emptyOptionState",default:{label:"empty",path:[],arrows:[],lineOption:u,circleOption:p,arrowOption:x}}),m=(0,o.cn)({key:"iniOptionState",default:{label:"ini",path:[{lat:37.500142,lng:127.026444},{lat:37.498578,lng:127.027175},{lat:37.498282,lng:127.027248}],arrows:[[{lat:37.4985836863302,lng:127.02716677408675},{lat:37.498578,lng:127.027175},{lat:37.49858767466946,lng:127.0271775299745}],[{lat:37.49828893769791,lng:127.02724079803167},{lat:37.498282,lng:127.027248},{lat:37.49829114046893,lng:127.02725205608529}]],lineOption:u,circleOption:p,arrowOption:x}}),g=(0,o.cn)({key:"nowOptionState",default:h}),f=(0,o.cn)({key:"focusState",default:{lat:0,lng:0}}),j=(0,o.cn)({key:"idfsState",default:[]}),w=(0,o.cn)({key:"optionsState",default:{}}),b=(0,o.cn)({key:"idfCountState",default:0}),v=(0,o.cn)({key:"nowIdfState",default:0}),O=(0,o.cn)({key:"centerState",default:{lat:37.498578,lng:127.027175}}),k=(0,o.cn)({key:"atomState",default:""});function y(e){let{className:t,drawPath:l,lngfirst:a,setLngfirst:i,focusOption:u,setFocusOption:p}=e,[x,h]=(0,s.useState)(""),[m,g]=(0,s.useState)(40),[f,j]=(0,o.FV)(d),[w,b]=(0,o.FV)(k),[v,O]=(0,s.useState)(!1),y=(0,s.useRef)(),N=function(e){p({...u,radius:parseFloat(e)})},C=function(){l(x),h("")},F=function(){v?g(40):g(140),O(!v)};return(0,n.jsxs)("div",{className:"\n            ".concat(t,"\n        "),children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(r.Z,{className:"my-2 ml-auto",color:"primary_outline",clickEvent:e=>C(),value:"draw path"})}),(0,n.jsx)("textarea",{ref:y,className:"\n                    w-full \n                    outline outline-1 outline-blue-200 \n                    rounded p-2 text-sm\n                ",style:{height:m},value:x,onChange:e=>h(e.target.value),placeholder:"input path"}),(0,n.jsx)(r.Z,{className:"absolute right-5",color:"gray",value:v?"△":"▽",clickEvent:e=>F()}),(0,n.jsx)(c.Z,{type:"text",placeholder:"label",width:"full",value:w,onChange:e=>b(e.target.value)}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"lngf",className:"mr-1",defaultValue:a,onChange:e=>i(e.target.value)}),(0,n.jsx)("label",{for:"lngf",children:"lng first"})]})}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"text-sm m-auto",children:"p_size"}),(0,n.jsx)("input",{id:"slider",type:"range",defaultValue:1,onPointerUp:e=>N(e.target.value),className:"w-full cursor-pointer accent-gray-400",max:.5,min:0,step:.1}),(0,n.jsx)(r.Z,{color:f?"primary":"primary_outline",value:f?"enabled":"disabled",clickEvent:()=>j(!f),className:"text-sm"})]})]})}function N(e){let{color:t="red",value:l=0,changeColor:a,aColor:o,max:i,min:r,step:c}=e,[d,u]=(0,s.useState)(l);return(0,s.useEffect)(()=>{u(l)},[l]),(0,n.jsx)("div",{className:"flex align-contents-center",children:(0,n.jsx)("input",{id:"slider",type:"range",value:d,onChange:e=>u(e.target.value),onPointerUp:e=>a(e.target.value,t),className:"w-full my-1 mx-1 cursor-pointer",max:i,min:r,step:c,style:{WebkitAppearance:"none",appearance:"none",backgroundColor:t,accentColor:t,height:4,borderRadius:50}})})}function C(e){let{option:t,setNowOption:l,nowIdf:a}=e,[o,i]=(0,s.useState)(1),[r,c]=(0,s.useState)(t.circleOption),[d,u]=(0,s.useState)({lineOption:t.lineOption,arrowOption:t.arrowOption}),[p,x]=(0,s.useState)(!0),[h,m]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!0),j=function(e,l){let n=t.circleOption.fillColor,a=("0"+parseInt(e).toString(16)).slice(-2),s=-1;s="red"==l?1:"green"==l?3:5;let o=n.substring(0,s)+a+n.substring(s+2);c({...r,fillColor:o,[l]:parseInt(e)})},w=function(e,t){let l=d.lineOption.strokeColor,n=("0"+parseInt(e).toString(16)).substr(-2),a=-1;a="red"==t?1:"green"==t?3:5;let s=l.substring(0,a)+n+l.substring(a+2);u({lineOption:{...d.lineOption,strokeColor:s,[t]:parseInt(e)},arrowOption:{...d.arrowOption,strokeColor:s,[t]:parseInt(e)}}),console.log(d.lineOption.strokeColor)},b=function(e){x(e),u({lineOption:{...d.lineOption,visible:e},arrowOption:d.arrowOption})},v=function(e){m(e),c({...r,visible:e})},O=function(e){f(e),u({lineOption:d.lineOption,arrowOption:{...d.arrowOption,visible:e}})};return(0,s.useEffect)(()=>{l({...t,lineOption:d.lineOption,circleOption:r,arrowOption:d.arrowOption})},[d,r]),(0,s.useEffect)(()=>{u({lineOption:t.lineOption,arrowOption:t.arrowOption}),c(t.circleOption),x(t.lineOption.visible),m(t.circleOption.visible),f(t.arrowOption.visible)},[a]),d.lineOption?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("hr",{className:"mx-1 my-2"}),(0,n.jsxs)("div",{className:"my-2 flex",children:[(0,n.jsxs)("div",{className:"flex-col justify-between w-1/2",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"checkbox",id:"viewMarker",checked:h,onClick:e=>v(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewMarker",children:"Mark"})]}),h?(0,n.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:r.fillColor},children:r.fillColor}):(0,n.jsx)(n.Fragment,{})]}),h?(0,n.jsxs)("div",{className:"flex-col m-auto",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{color:"red",aColor:"accent-red-400",value:r.red,changeColor:j,max:255,min:0,step:1}),(0,n.jsx)(N,{color:"green",aColor:"accent-green-400",value:r.green,changeColor:j,max:255,min:0,step:1}),(0,n.jsx)(N,{color:"blue",aColor:"accent-blue-400",value:r.blue,changeColor:j,max:255,min:0,step:1})]}),(0,n.jsx)(N,{color:"gray",aColor:"accent-gray-200",value:1,changeColor:function(e){c({...r,radius:parseFloat(e)})},max:2,min:0,step:.1})]}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)("hr",{className:"mx-1 my-2"}),(0,n.jsxs)("div",{className:"my-2 flex",children:[(0,n.jsxs)("div",{className:"flex-col justify-between w-1/2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",id:"viewLine",checked:p,onClick:e=>b(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewLine",children:"Line"})]}),p?(0,n.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:d.lineOption.strokeColor},children:d.lineOption.strokeColor}):(0,n.jsx)(n.Fragment,{})]}),p?(0,n.jsxs)("div",{className:"flex-column m-auto",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{color:"red",aColor:"accent-red-400",value:d.lineOption.red,changeColor:w,max:255,min:0,step:1}),(0,n.jsx)(N,{color:"green",aColor:"accent-green-400",value:d.lineOption.green,changeColor:w,max:255,min:0,step:1}),(0,n.jsx)(N,{color:"blue",aColor:"accent-blue-400",value:d.lineOption.blue,changeColor:w,max:255,min:0,step:1})]}),(0,n.jsx)(N,{color:"gray",aColor:"accent-gray-200",value:1,changeColor:function(e){u({lineOption:{...d.lineOption,strokeWeight:e},arrowOption:{...d.arrowOption}})},max:4,min:0,step:.1})]}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)("hr",{className:"mx-1 my-2"}),(0,n.jsxs)("div",{className:"my-2 flex",children:[(0,n.jsxs)("div",{className:"flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"checkbox",id:"viewArrow",checked:g,onClick:e=>O(e.target.checked),className:"mr-1"}),(0,n.jsx)("label",{for:"viewArrow",children:"Arrow"})]}),g?(0,n.jsx)("div",{className:"text-xs text-center text-white rounded rounded-sm",style:{backgroundColor:d.arrowOption.strokeColor},children:d.arrowOption.strokeColor}):(0,n.jsx)(n.Fragment,{})]}),g?(0,n.jsx)("div",{className:"flex-col m-auto",children:(0,n.jsx)(N,{className:"w-full",color:"gray",aColor:"accent-gray-200",value:1,changeColor(){},max:10,min:0,step:.1})}):(0,n.jsx)(n.Fragment,{})]})]}):(0,n.jsx)(n.Fragment,{})}function F(e){let{path:t,focusCoordi:l,clickCoordi:a}=e,[o,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{i(!0)},[]),o?(0,n.jsx)("table",{className:"w-full",children:(0,n.jsx)("tbody",{children:t.map((e,t)=>{let{lat:s,lng:o}=e;return(0,n.jsxs)("tr",{className:"text-center hover:bg-gray-200",onPointerEnter:()=>l(s,o),onPointerUp:()=>a(s,o),children:[(0,n.jsx)("td",{className:"w-1/5 bg-gray-600 text-white text-sm outline outline-1",children:t}),(0,n.jsx)("td",{className:"w-2/5 px-1 text-sm",children:s}),(0,n.jsx)("td",{className:"w-2/5 text-sm",children:o})]},t)})})}):(0,n.jsx)(n.Fragment,{})}function S(e){let{idf:t,now:l,changeNow:a,option:o}=e,[i,r]=(0,s.useState)("");return(0,s.useEffect)(()=>{t==l?r("\n                bg-white\n                text-black\n                shadow-md\n            "):r("\n            bg-gray-200\n            text-gray-600\n        ")},[l]),(0,n.jsxs)("div",{className:"\n            ".concat(i,"\n            flex justify-between\n            min-w-[15%] h-6 text-center align-middle\n            cursor-pointer\n        "),onClick:()=>a(t),children:[(0,n.jsx)("div",{className:"text-center w-full align-middle px-2",children:o.label}),(0,n.jsxs)("div",{className:"flex-col",children:[(0,n.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:o.circleOption.fillColor}}),(0,n.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:o.lineOption.visible?o.lineOption.strokeColor:"#FFFFFF"}}),(0,n.jsx)("div",{className:"w-3 h-2",style:{backgroundColor:o.arrowOption.visible?o.arrowOption.strokeColor:"#FFFFFF"}})]})]})}function M(e){let{className:t,idfs:l,nowIdf:a,nowOption:s,clickCoordi:i,focusCoordi:c,changeNow:d,setNowOption:u,delLine:p}=e,x=(0,o.sJ)(w);return(0,n.jsxs)("div",{className:"".concat(t),children:[(0,n.jsx)(r.Z,{className:"w-[236px] mb-2 text-sm",color:"primary_outline",value:"delete line",clickEvent:p}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1 justify-items-center shadow",children:l.map((e,t)=>(0,n.jsx)(S,{idf:e,option:x[e],now:a,changeNow:d},t))}),(0,n.jsx)(C,{option:s,setNowOption:u,nowIdf:a}),(0,n.jsx)("hr",{className:"mx-1 my-4"}),(0,n.jsx)("div",{className:"max-h-[400px] overflow-auto",children:(0,n.jsx)(F,{path:s.path,focusCoordi:c,clickCoordi:i})})]})}function I(){let[e,t]=(0,s.useState)({}),l=(0,o.sJ)(m),[r,c]=(0,s.useState)({strokeOpacity:0,fillOpacity:.4,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:.8,zIndex:1,fillColor:"#00FF00"}),u=(0,o.sJ)(d),[p,x]=(0,o.FV)(f),[N,C]=(0,o.FV)(j),[F,S]=(0,o.FV)(w),I=(0,o.sJ)(h),[E,_]=(0,o.FV)(b),[V,A]=(0,o.FV)(v),[P,z]=(0,o.FV)(k),[L,Z]=(0,o.FV)(g),[J,W]=(0,o.FV)(O),[T,U]=(0,s.useState)(15),[X,K]=(0,s.useState)(!1),[Q,R]=(0,s.useState)(!1),B=function(e){let t=e.length,l=[];for(let n=1;n<t;n++){let a=e[n].lat*Math.PI/180,s=e[n-1].lat*Math.PI/180,o=e[n].lng*Math.PI/180,i=e[n-1].lng*Math.PI/180,r=Math.cos(s)*Math.sin(i-o),c=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(i-o);console.log(r,c);let d=Math.atan2(c,r),u=35*Math.PI/180,p=d+u,x=d-u,h=e[n].lat,m=e[n].lng,g=[{lat:h+1e-5*Math.sin(p),lng:m+1e-5*Math.cos(p)},{lat:h,lng:m},{lat:h+1e-5*Math.sin(x),lng:m+1e-5*Math.cos(x)}];l.push(g)}return l},D=function(e){let t=e.replaceAll("["," ").replaceAll("]"," ").replaceAll("	"," ").replaceAll("\n"," ").replaceAll(","," ").replace(/^\s+|\s+$/g,"").replace(/ +/g," ").replaceAll(" ",","),l=t.split(",").map(Number),n=2*parseInt(l.length),a=[],s=0,o=1;X&&(s=1,o=0);for(let i=0;i<n;i+=2){let r=l[i+s],c=l[i+o];if(Q&&(r=parseInt(r/100)+r%100/60,c=parseInt(c/100)+c%100/60),!(1>Math.abs(r)||1>Math.abs(c))){if(!r||!c)break;a.push({lat:r,lng:c})}}return console.log(a),a};return(0,n.jsxs)("div",{className:"flex mx-2 gap-2",children:[(0,n.jsx)("div",{className:"bg-red-100 w-full h-screen",children:(0,n.jsx)(a.KJ,{googleMapsApiKey:"AIzaSyBkZS2y5XLGTz09p372w0MV4bQgeukEiiQ",children:(0,n.jsxs)(a.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:J,zoom:T,children:[N.map((e,t)=>e==V?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(i,{option:F[e]},t)),(0,n.jsx)(i,{option:L}),(0,n.jsx)(a.VM,{center:p,options:r})]})})}),(0,n.jsxs)("div",{className:" absolute top-32 left-4 flex flex-col gap-2 basis-1/5 max-w-[260px] min-w-[230px] bg-white p-2 rounded shadow-md",children:[(0,n.jsx)(y,{className:"bg-gray-100 p-2 h-50 rounded",lngfirst:X,setLngfirst:K,drawPath:function(e){let t={...I};e&&(t.path=D(e),t.arrows=B(t.path),t.label=P||E,z(""),S({...F,[V]:L,[E]:t}),C([...N,E]),A(E),Z(t),_(E+1),t.path&&W({lat:t.path[0].lat,lng:t.path[0].lng}))},focusOption:r,setFocusOption:c}),(0,n.jsx)(M,{className:"rounded max-h-full bg-white",idfs:N,nowIdf:V,nowOption:L,setNowOption:Z,delLine:function(){if(N.length>1){V!=N[0]&&A(N[0]),Z(F[N[0]]);let e={...F};delete e[V],S(e),C(N.filter(e=>e!=V))}else A(-1),Z({...l,path:[],arrows:[]}),C([]),S({})},focusCoordi:function(e,t){u&&(W({lat:e,lng:t}),x({lat:e,lng:t}))},clickCoordi:function(e,t){W({lat:e,lng:t}),x({lat:e,lng:t})},changeNow:function(e){e!=V&&(S({...F,[V]:L}),A(e),Z(F[e]))}})]})]})}}},function(e){e.O(0,[255,774,888,179],function(){return e(e.s=7023)}),_N_E=e.O()}]);